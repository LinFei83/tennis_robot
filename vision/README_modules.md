# 网球检测模块化重构

## 概述

原始的单文件网球检测代码已重构为3个模块化文件，提高了代码的可维护性和可扩展性。

## 文件结构

```
vision/
├── tennis_detector.py    # 核心检测器模块
├── camera_manager.py     # 摄像头管理模块  
├── main.py              # 主程序入口
├── tennis_detection.py  # 原始文件（保留作为备份）
└── README_modules.md    # 本文档
```

## 模块说明

### 1. tennis_detector.py
**核心检测器模块**
- `TennisDetector` 类：负责模型加载、图像预处理、推理和后处理
- 主要功能：
  - TensorFlow Lite模型加载和量化参数处理
  - 图像预处理（尺寸调整、数据类型转换）
  - 模型推理和输出后处理
  - 检测结果可视化
  - 截图保存功能

### 2. camera_manager.py
**摄像头管理模块**
- `CameraConfig` 类：配置文件管理
- `CameraManager` 类：摄像头初始化和帧获取
- `PerformanceMonitor` 类：性能监控
- 主要功能：
  - 配置文件加载和默认配置管理
  - 摄像头参数设置和初始化
  - 自适应跳帧机制
  - 性能统计和监控

### 3. main.py
**主程序入口**
- 简洁的主函数实现
- 模块间的协调和控制
- 用户界面和交互处理
- 异常处理和资源清理

## 使用方法

```bash
cd /home/ubuntu/project/tennis_robot/vision
python3 main.py
```

## 改进点

1. **模块化设计**：将功能按职责分离到不同模块
2. **代码复用**：各模块可独立使用和测试
3. **可维护性**：清晰的类结构和方法分离
4. **异常处理**：更好的错误处理和资源管理
5. **类型提示**：添加了类型注解提高代码可读性
6. **上下文管理**：使用上下文管理器自动释放资源

## 兼容性

新的模块化版本与原始版本功能完全兼容，保持相同的用户界面和操作体验。
